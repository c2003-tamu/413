#!/bin/bash

# Define the server address and port
HOST="localhost"
PORT=8080

# Start the Python HTTP server in the background
echo "Starting the server..."
python3 insecure.py & # Start server in the background
SERVER_PID=$!  # Capture the server process ID

# Wait a bit for the server to start
sleep 1

# Test the server using nc (Netcat)
echo "Testing: http://$HOST:$PORT/yes.html"
echo -e "GET /yes.html HTTP/1.1\r\nHost: $HOST\r\nConnection: close\r\n" | nc $HOST $PORT
echo "------------------------------------"
echo "Testing: http://$HOST:$PORT/../no.html"
echo -e "GET /../no.html HTTP/1.1\r\nHost: $HOST\r\nConnection: close\r\n" | nc $HOST $PORT

# Stop the server by killing the process
echo "Stopping the server..."
kill $SERVER_PID  # Kill the server process

